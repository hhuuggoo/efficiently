{% extends "base.html" %}
{% block other_scripts%}
<link rel="stylesheet" type="text/css" 
      href="/static/css/outline.css"/>

<div class="item-controls hide">
  <button class="ctrl-button" id="add-button">add</button>
  <button class="ctrl-button"  id="state-button">todo</button>
  <button class="ctrl-button"  id="overview-button">hide</button>
  <button class="ctrl-button" id="del-button">delete</button>
</div>
<div id="control" class="control-panel hide">
  <ul>
    <li>
      <div class="nav-button" id="left-button-ctrl">left</div>
    </li>
    <li>
      <div class="nav-button"  id="right-button-ctrl">right</div>
    </li>
    <li>
      <div class="nav-button"  id="up-button-ctrl">up</div>
    </li>
    <li>
      <div class="nav-button" id="down-button-ctrl">down</div>
    </li>
    <li>
      <div class="nav-button"  id="todo-button-ctrl">todo</div>
    </li>
    <li>
      <div class="nav-button"  id="hide-button-ctrl">hide</div>
    </li>
    <li>
      <div class="nav-button"  id="add-button-ctrl">add</div>
    </li>
    <li>
      <div class="nav-button"  id="del-button-ctrl">del</div>
    </li>
</div>
<script type="text/template" id="main-template">
  <div class="fakedotcontainer">
    <image class="fakedot"> </image>	  
  </div>
  <div class="hideindicator <%= chidden ? '' : 'hide' %>">+</div>
  <div class="abox">
    <textarea class="outline-input <%= edit ? '' : 'hide'%>"></textarea>
    <div class="outline-textdisplay <%= edit ? 'hide' : ''%>"><%= text %></div>
  </div>
</script>

<script type="text/template" id="children-template">
  <div class="clearfix">
	<div class="edge topedge"></div>
	<div class="fakedotcontainer"></div>
	<div class="abox">
	  <div id="" class="children"></div>
	</div>
  </div>
  <div class="edge bottomedge"></div>
</script>

<!-- start outlinejs -->
<script type="text/javascript" src="/static/vendor/backbone/backbone.js"></script>
<script type="text/javascript" src="/static/js/bboilerplate.js"></script>
<script type="text/javascript" src="/static/js/effoutline.js"></script>
<script type="text/javascript" src="/static/js/parser.js"></script>
<script type="text/javascript" src="/static/js/main.js"></script>
<!-- <script src="/static/js/localstorage.js"></script> -->
<!-- <script src="/static/js/model.js"></script> -->
<!-- <script src="/static/js/parser.js"></script> -->
<!-- <script src="/static/js/outline.js"></script> -->
<!-- <script src="/static/js/keybindings.js"></script> -->
<!-- <script src="/static/js/socket.io.js"></script> -->
<!-- end outlinejs -->
{% end %}
{% block main %}
<hr class="mainsep"/>
<!-- information passed down to client -->
<div class="container-fluid">
  <div id="document_id" class="hide">{{document_id}}</div>
  <div id="root_id" class="hide">{{root_id}}</div>
  <div id="client_id" class="hide">{{client_id}}</div>
  <div id="mode" class="hide">{{mode}}</div>
  <div class="searchbox hide" id="searchbox">
    <textarea class="searchtext" id="searchtext"></textarea>
    <div>Incremental Search Alt + [ and alt + ] to search forward and backwards</div> 
  </div>
  <div class="row-fluid">
    <div class="span8">
      <div id="connected"></div>
      <h4>{{ title }}: by {{ owner }}</h4>
      {% if mode == 'r' %}
      Warning, this document is opened in read only mode, 
      you will not be able to save any changes
      {% end %}
      <div class="abox" id="{{document_id}}-display}}">
      </div>
      <div id="{{document_id}}-outline" class="rootnode">
      </div>
      <hr>
      <div id="trash" class="">
	    <button class="left" id="global-clear-trash">clear trash
	    </button>
	    <div class="clearfix" id="trash">
	    </div>
      </div>
    </div>
    <div class="span4">
      <h4>Instructions</h4>
      <ul class="square">
	<li>
	  click on the taskbar in the upper left corner of the screen to manipulate the document.
	</li>
	<li>
	  The buttons : left, right, up, down, move the currently selected item in that direction.  
	</li>
	<li>
	  todo changes the todo state.  hide will control the hiding of the subtopics.
	<li>
	  add and delete will add new nodes and delete nodes.
	</li>
	<li>
	  click on the bullet points to drag topics and subtopics around
	</li>
      </ul>
      <h5>Keyboard</h5>
      <ul class="square">
	<li>
	  Most of these short cuts require a Mod key, ctrl, alt or option can all be used for the mod key.  This way,
	  if your computer is already using ctrl+p for something, try alt+p, it should work just as well
	</li>
	<li>use the arrow keys to navigate
	</li>
	<li>
	  mod + arrow keys will move items around, mod + backspace will
	  delete an item
	</li>
	<li>
	  mod + / will hide topics, mod + > will hide subtopics of the selected item, mod + < will change the todo status
											      </li>
	<li>
	  enter key will create another topic.  mod + enter will create a subtopic
	</li>
	<li>
	  Incremental Search mod + ] and mod + [ to search forward and backwards, 
	  mod + p will bring up the search box
	</li>
      </ul>

      <h5>Data</h5>
      <ul class="square">
	<li>
	  There is an export link above where you can get your outlines in txt form
	</li>
	<li>
	  There is an import link above as well, where you can upload data into your outline.
	  Just format it the same way the export displays the data
	</li>
	<li>
	  You can also email these imports into your document, send an email to {{ owner }}@yata.in, 
	  with a subject: {{title}}, and the message body, structured the same way as the data import.
	</li>
      </ul>
    </div>
</ul>
</div>
{% end %}
